<div class="container">
  <div class="row">
    <div class="header">  
      <div class="padding-bottom-small">
        <h4 class="leave-header">LEAVES</h4>
      </div>                        
    </div>

     <!-- <div class="row col-md-6 col-md-offset-2 custyle"> -->
     <app-loader></app-loader>
      <div ng-if="!loading">
        <table class="table table-hover table-bordered table-striped">
        <thead>
          <button class="btn btn-success btn-add add-leave" type="button" data-toggle="modal" ng-click="showAddModal()">
            <i class="glyphicon glyphicon-plus gs"></i> Add Leave
          </button>
          <tr>
            <th>No.</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Duration</th>
            <th>Reason</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
          <tr ng-if="!leaves.length">
            <td colspan="6" class="text-align-center">No Records Found</td>
          </tr>
          <tr ng-repeat="leave in leaves track by $index">
            <td class="table-index-medium">{{$index+1}}</td>
            <td>{{ leave.startDate}}</td>
            <td>{{ leave.endDate}}</td>
            <td>{{ leave.duration}}</td>
            <td>{{ leave.reason}}</td>
            <td class="text-center table-actions-medium">
              <button class='btn btn-primary btn-xs' type="button" ng-click="showEditModal(leave)"><span class="glyphicon glyphicon-edit"></span> Edit</button>
              <button class="btn btn-danger btn-xs" ng-click="showDeleteModal(leave)"><span class="glyphicon glyphicon-trash"></span> Del</button></td>
          </tr>
        </table>
    </div>  
  </div>
</div>

<!-- Add leave Modal -->
<tms-modal modal-visible="isAddModalVisible" backdrop="static" on-sown="" on-hide="" >
  <modal-header title="Add Leave"></modal-header>
  <modal-body>
    <div class="sprint-errors" ng-show="errorMessage">
      <div class="alert alert-warning">
        <strong>Error. </strong> {{errorMessage}}
        <p>
          {{errorDetails}}
        </p>
      </div>
    </div>


    <div class="form-group">
      <tms-datepicker label="Start Date:" ng-model="leave.startDate"></tms-datepicker>
    </div>

    <div class="form-group">
          <tms-datepicker label="End Date:" ng-model="leave.endDate"></tms-datepicker>
    </div>

     <div class="form-group">
      <label class="label-title">Reason: </label>
      <input class="form-control" type="text" placeholder="Reason" ng-model="leave.reason">
    </div>

  </modal-body>
  <modal-footer>
    <button type="button" class="btn btn-secondary" ng-click="closeModal()">Cancel</button>
    <button type="button" class="btn btn-primary" ng-disabled="error" ng-click="addLeave(leave)">Add</button>
  </modal-footer>
</tms-modal>

<!-- Edit leave Modal -->
<tms-modal modal-visible="isEditModalVisible" backdrop="static" on-sown="" on-hide="" >
  <modal-header title="Edit Leave"></modal-header>
  <modal-body>
    <div class="sprint-errors" ng-show="errorMessage">
      <div class="alert alert-warning">
        <strong>Error. </strong> {{errorMessage}}
      </div>
    </div>

    <div class="form-group">
      <tms-datepicker label="Start Date:" ng-model="leave.startDate"></tms-datepicker>
    </div>

    <div class="form-group">
      <tms-datepicker label="End Date:" ng-model="leave.endDate"></tms-datepicker>
    </div>

     <div class="form-group">
      <label class="label-title">Reason: </label>
      <input class="form-control" type="text" placeholder="Reason" ng-model="leave.reason">
    </div>

  </modal-body>
  <modal-footer>
    <button type="button" class="btn btn-secondary" ng-click="closeModal()">Cancel</button>
    <button type="button" class="btn btn-primary" ng-disabled="error" ng-click="editLeave(leave)">Update</button>
  </modal-footer>
</tms-modal>

<!-- Delete leave Modal -->
<tms-modal modal-visible="isDeleteModalVisible" backdrop="static" on-sown="" on-hide="" >
  <modal-header title="Delete Leave"></modal-header>
  <modal-body>
    <div class="sprint-errors" ng-show="errorMessage">
      <div class="alert alert-warning">
        <strong>Error. </strong> {{errorMessage}}
      </div>
    </div>

    <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete this Record?</div>

  </modal-body>
  <modal-footer>
    <button type="button" class="btn btn-secondary" ng-click="closeModal()">No</button>
    <button type="button" class="btn btn-primary" ng-disabled="error" ng-click="deleteLeave(leave.leaveId)">Yes</button>
  </modal-footer>
</tms-modal>

